<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mythical Studios - Game Hub</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!-- Add Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
  <!-- Modern UI font and theme overrides -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='theme.css') }}">
</head>
<body>
  <header>
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Mythical Studios Logo" class="logo">
    <h1>
      Mythical Studios
    </h1>
  </header>

  <nav class="tabs">
    <button class="tablink gold" onclick="openTab('gamehub')"><span class="icon">üéÆ</span>Game Hub</button>
    <button class="tablink gold" onclick="openTab('quizhub')"><span class="icon">‚ùì</span>Quiz Hub</button>
    <button class="tablink" onclick="openTab('about')"><span class="icon">‚ÑπÔ∏è</span>About Us</button>
  </nav>

  <main>
    <!-- Game Hub with inner tabs -->
    <section id="gamehub" class="tabcontent">
      <nav class="inner-tabs">
        <button class="tablink gold" onclick="openInnerTab('snake')">Snake Game</button>
        <button class="tablink gold" onclick="openInnerTab('snl')">Snakes & Ladders</button>
        <button class="tablink gold" onclick="openInnerTab('tictactoe')">Tic Tac Toe</button>
        <button class="tablink gold" onclick="openInnerTab('moto')">Moto X3M</button>
      </nav>

      <!-- Snake Game -->
      <section id="snake" class="inner-tabcontent">
        <h2>Snake Game</h2>
        <canvas id="snakeCanvas" width="400" height="400"></canvas>
        <p id="snakeScore">Score: 0</p>

        <div class="snake-controls">
          <button onclick="restartSnake()">Restart</button>
          <div class="arrow-buttons-inline">
            <button onclick="setDirectionFromButton('LEFT')">‚Üê</button>
            <button onclick="setDirectionFromButton('UP')">‚Üë</button>
            <button onclick="setDirectionFromButton('DOWN')">‚Üì</button>
            <button onclick="setDirectionFromButton('RIGHT')">‚Üí</button>
          </div>
        </div>
      </section>

      <!-- Snakes & Ladders -->
      <section id="snl" class="inner-tabcontent">
        <h2>Snakes & Ladders</h2>
        <canvas id="snlCanvas" width="400" height="400"></canvas>
        <button id="rollDiceBtn">Roll Dice</button>
        <p id="diceResult">Roll to start the game!</p>
      </section>

      <!-- Tic Tac Toe -->
      <section id="tictactoe" class="inner-tabcontent">
        <h2>Tic Tac Toe</h2>
        <div id="tictactoeBoard" class="board"></div>
        <p id="tictactoeResult"></p>
        <button onclick="restartTicTacToe()">Restart</button>
      </section>

      <!-- Moto X3M -->
      <section id="moto" class="inner-tabcontent">
        <h2>Moto X3M (Simplified)</h2>
        <canvas id="motoCanvas" width="600" height="300"></canvas>
        <p id="motoControls">Controls: ‚Üë accelerate | ‚Üì brake | ‚Üê tilt back | ‚Üí tilt forward</p>
        <button onclick="restartMoto()">Restart</button>
      </section>
    </section>

    <!-- Quiz Hub with inner tabs -->
    <section id="quizhub" class="tabcontent">
      <nav class="inner-tabs">
        <button class="tablink gold" onclick="openInnerTab('quizGeneral')">General Quiz</button>
        <button class="tablink gold" onclick="openInnerTab('quizScience')">Science Quiz</button>
        <button class="tablink gold" onclick="openInnerTab('quizHistory')">History Quiz</button>
      </nav>

      <section id="quizGeneral" class="inner-tabcontent">
        <h2>General Quiz</h2>

        <div id="quizSetup" class="quiz-setup">
          <p>Select a grade level to begin:</p>
          <select id="gradeSelect" class="quiz-select">
            <option value="" selected disabled>Choose grade</option>
            <option value="grade1">Grade 1</option>
            <option value="grade2">Grade 2</option>
            <option value="grade3">Grade 3</option>
          </select>
          <button id="startQuizBtn" class="btn-gold">Start Quiz</button>
        </div>

        <div id="quizContainer" class="quiz-container" style="display:none;">
          <div class="quiz-card">
            <div class="quiz-header">
              <span id="quizProgress">Question 1 of 5</span>
            </div>
            <h3 id="quizQuestion">Question text</h3>
            <div id="quizOptions" class="quiz-options">
              <!-- Options injected by JS -->
            </div>
            <div class="quiz-actions">
              <button id="quizSubmitBtn" class="btn-gold" disabled>Submit</button>
            </div>
          </div>
        </div>

        <div id="quizResult" class="quiz-result" style="display:none;">
          <h3>Round Complete!</h3>
          <p id="quizScore">You scored 0 out of 5.</p>
          <div id="quizReview" class="quiz-review" style="display:none;"></div>
          <div class="quiz-actions">
            <button id="quizPlayAgain" class="btn-gold">Play Again</button>
            <button id="quizChangeGrade" class="btn-outline">Change Grade</button>
          </div>
        </div>
      </section>

      <section id="quizScience" class="inner-tabcontent">
        <h2>Science Quiz</h2>

        <div id="scienceQuizSetup" class="quiz-setup">
          <p>Select a grade level to begin:</p>
          <select id="scienceGradeSelect" class="quiz-select">
            <option value="" selected disabled>Choose grade</option>
            <option value="grade1">Grade 1</option>
            <option value="grade2">Grade 2</option>
            <option value="grade3">Grade 3</option>
          </select>
          <button id="scienceStartQuizBtn" class="btn-gold">Start Quiz</button>
        </div>

        <div id="scienceQuizContainer" class="quiz-container" style="display:none;">
          <div class="quiz-card">
            <div class="quiz-header">
              <span id="scienceQuizProgress">Question 1 of 5</span>
            </div>
            <h3 id="scienceQuizQuestion">Question text</h3>
            <div id="scienceQuizOptions" class="quiz-options">
              <!-- Options injected by JS -->
            </div>
            <div class="quiz-actions">
              <button id="scienceQuizSubmitBtn" class="btn-gold" disabled>Submit</button>
            </div>
          </div>
        </div>

        <div id="scienceQuizResult" class="quiz-result" style="display:none;">
          <h3>Round Complete!</h3>
          <p id="scienceQuizScore">You scored 0 out of 5.</p>
          <div id="scienceQuizReview" class="quiz-review" style="display:none;"></div>
          <div class="quiz-actions">
            <button id="scienceQuizPlayAgain" class="btn-gold">Play Again</button>
            <button id="scienceQuizChangeGrade" class="btn-outline">Change Grade</button>
          </div>
        </div>
      </section>

      <section id="quizHistory" class="inner-tabcontent">
        <h2>History Quiz</h2>
        <p>Coming soon.</p>
      </section>
    </section>

    <!-- About Us -->
    <section id="about" class="tabcontent">
      <h2>About Us</h2>
      <p>
        <strong>Mythical Studios</strong> - a website meant for game lovers!
        We develop games for all age groups that are easy and fun to play with.
        Contact us at mythicalStudios12@gmail.com to provide us with suggestions and feedback.
      </p>
    </section>
  </main>

  <!-- JS files -->
  <script src="{{ url_for('static', filename='snake.js') }}"></script>
  <script src="{{ url_for('static', filename='snl.js') }}"></script>
  <script src="{{ url_for('static', filename='tictactoe.js') }}"></script>
  <script src="{{ url_for('static', filename='moto.js') }}"></script>
  <script src="{{ url_for('static', filename='quiz.js') }}"></script>
  <script src="{{ url_for('static', filename='science_quiz.js') }}"></script>

  <script>
    function openTab(tabName) {
      const tabs = document.querySelectorAll('.tabcontent');
      tabs.forEach(tab => tab.style.display = "none");
      const target = document.getElementById(tabName);
      if (target) {
        target.style.display = "block";
        // If the opened tab has inner tabs, auto-open the first one if none is visible
        const innerTabs = target.querySelectorAll('.inner-tabcontent');
        if (innerTabs.length > 0) {
          const anyVisible = Array.from(innerTabs).some(el => el.style.display === 'block');
          if (!anyVisible) {
            innerTabs.forEach(el => el.style.display = 'none');
            innerTabs[0].style.display = 'block';
          }
        }
      }
    }

    function openInnerTab(tabName) {
      const innerTabs = document.querySelectorAll('.inner-tabcontent');
      innerTabs.forEach(tab => tab.style.display = "none");
      const target = document.getElementById(tabName);
      if (target) target.style.display = "block";
    }

    // Show Game Hub and default inner tab
    openTab('gamehub');
    openInnerTab('snake');
  </script>
</body>
</html>
